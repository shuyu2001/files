const _0x4e3b=(ms)=>new Promise((_0x3b2a)=>setTimeout(_0x3b2a,ms));const _0x2d5f={tableCheckbox:"#qc-pro-main-tools div:nth-child(3) .comment-table thead tr th.ovui-th--sticky-left div label div div",button1:"#qc-pro-main-tools > div > div > div:nth-child(3) > div > div > div > div.top-btns > div.oc-space.oc-space-horizontal.oc-space-align-center > div:nth-child(2) > div > button",modalConfirm:"body > div.ovui-modal__wrap.oc-modal-wrap > div > div.ovui-modal__footer > div > div:nth-child(2) > button",};function waitForElement(selector,timeout=5000){return new Promise((_0x1a2b,_0x4c3d)=>{const start=performance.now();const checkElement=()=>{const _0x5e2d=document.querySelector(selector);if(_0x5e2d)return _0x1a2b(_0x5e2d);if(performance.now()-start>timeout)return _0x4c3d(new Error(`Timeout:${selector}`));requestAnimationFrame(checkElement)};checkElement()})}async function waitAndClick(selector,timeout=5000){const _0x1b3c=await waitForElement(selector,timeout);_0x1b3c.click();return _0x1b3c}async function startJOB(keywords){try{if(!window.state.isWorking){return}const filterDropdown=await waitForElement("#qc-pro-main-tools > div > div > div:nth-child(1) > div > div > div.comment-filter > div > div:nth-child(5) > div > div > div > div > div > div");filterDropdown.click();await _0x4e3b(100);const dropdownOption=await waitForElement("body > div.oc-select__popover.ovui-select__popper.ovui-select__popper--show > div > div > div > div > div:nth-child(1) > div > span");dropdownOption.click();await _0x4e3b(2000);await waitForElement(_0x2d5f.tableCheckbox);selectIndex(keywords);console.log("\u2705 \u7b2c\u4e00\u6b65\uff1a\u9009\u62e9\u5173\u952e\u8bcd\u5b8c\u6210");await waitAndClick(_0x2d5f.button1);console.log("\u2705 \u7b2c\u4e8c\u6b65\uff1a\u6309\u94ae1\u5df2\u70b9\u51fb");await waitAndClick(_0x2d5f.modalConfirm);console.log("\u2705 \u7b2c\u4e09\u6b65\uff1a\u5f39\u7a97\u786e\u8ba4\u5b8c\u6210");console.log("\u{1F389} \u6240\u6709\u81ea\u52a8\u5316\u64cd\u4f5c\u5b8c\u6210\uff0c\u9875\u9762\u5373\u5c06\u5237\u65b0");if(window.state.isWorking){location.reload()}}catch(_0x3e4f){console.error("\u274C \u81ea\u52a8\u5316\u51fa\u9519\uff1a",_0x3e4f.message);if(window.state.isWorking){location.reload()}}}function selectIndex(keywords){if(!Array.isArray(keywords)){console.error("\u274C Keywords must be an array");return}if(keywords.some((keyword)=>typeof keyword==="string"&&keyword.trim()==="*")){console.log("\u9009\u4e2d\u6240\u6709\u884c");const headerCheckbox=document.querySelector(_0x2d5f.tableCheckbox);if(headerCheckbox)headerCheckbox.click();return}const rows=document.querySelectorAll("table tbody tr");for(const row of rows){const cell=row.querySelector("td:nth-child(2)");if(!cell)continue;const text=cell.textContent.trim();if(keywords.some((keyword)=>typeof keyword==="string"&&text.includes(keyword))){const checkbox=row.querySelector('input[type="checkbox"]');if(checkbox){console.log("\u9009\u4e2d ==>",text);checkbox.click()}}}}
